---

# 상품 도메인 개발

## 구현 목록

- 상품 등록
- 목록 조회
- 수정

---

## Item의 StockQuantity

- 2가지의 비즈니스 로직을 구현 할것이다 ( 데이터를 가지고 있는 곳에서 비즈니스 로직을 구현하는게 객체지향적이며 응집도가 높다)
- 즉 상태를 가지고 있는 객체에서 상태에 대한 변경을 행한다 생각하면 됨.

    ![](https://images.velog.io/images/donglee99/post/21a930df-224a-483b-8574-c35666cd86f3/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202021-05-11%20%EC%98%A4%ED%9B%84%209.13.13.png)

    - 다음과 같이 Item의 재고 관리는 Item 객체 내부에서 처리한다는 것을 의미한다.
    - 다른 객체에서 Item 의 재고 관리를 해 Set으로 지정해주는것은 객체지향적이지 못하다.

    ➕ 상품 Service객체는 그저 상품 Repository에 단순히 위임하는 클래스 실질적 DB 조작은 Repository에서 행해짐

---

## 주문 도메인 개발

- 상품 주문
- 주문 조회
- 주문 취소

## 생성 메서드
![](https://images.velog.io/images/donglee99/post/f4174131-5930-4bf2-ab4d-89e15d46d340/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202021-05-11%20%EC%98%A4%ED%9B%84%209.17.22.png)


- 생성 메서드가 없다면 New 를 통해 Order를 생성한후 하나하나 다 Set하는 코드가 계속 중복될것이다.
- 이를 해결하기 위해 Creat 메소드를 통해 코드를 간결화 시키고 가독성을 높힐수있다. 또한 앞으로 생성을 변경할때도 이부분만 변경을 하면 되는 이점을 가지고 있다.

## ➕ Cancel 과 GetTotalPrice
![](https://images.velog.io/images/donglee99/post/7b095c45-46a2-476e-8591-f97a56737395/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202021-05-11%20%EC%98%A4%ED%9B%84%209.20.10.png)

- 위 코드는 모두 Order에 있는 코드로 주문에 대한 상태 변경 로직을 모두 Order 객체 내부에서 처리해주고 있다. = 객체 지향적 또한 주문에 대한 주문한 품목에 대한 취소도 OrderItem 내부에있는  Cancel을 이용해 처리해주고있는것을 볼수있다.
- GetTotalPrice 또한 마찬가지다 앞으로 다른 객체에의 내부 상태에대해 처리해야하는 로직이 생기면 그 객체에 메세지를 보내 처리하지 직접적으로 상태를 호출해 처리하는 방식을 지양하자.

## ➕ OrderService

![](https://images.velog.io/images/donglee99/post/6242d91d-6ea8-4aac-9b40-761a8e23d456/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202021-05-11%20%EC%98%A4%ED%9B%84%209.26.25.png)
- OrderService 내의 주문을 살펴보면 받아온 memberId, itemId, count 를 토대로 주문서를 작성하는 로직을 볼수있다. 이때 엔티티를 조회해 해당 멤버와 아이템을 찾고 주문을 생성 후 저장하는 순으로 로직이 짜여있다
- 위 코드에서 크게 중요하다 생각되는 부분은 각각 객체를 생성하고 set을 하지 않았지만 디비에 저장되어있는것을 볼수있을것이다 이는 cascade를 통해 연결되어있는 객체들이 order가 save 되는 시점에 모두 저장되기 떄문이다.